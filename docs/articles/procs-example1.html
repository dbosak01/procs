<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Example 1: Demographics â€¢ procs</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Example 1: Demographics">
<meta property="og:description" content="procs">
<meta property="og:image" content="https://procs.r-sassy.org/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">procs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.9007</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"></ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/procs.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/procs-freq.html">The Frequency Function</a>
    </li>
    <li>
      <a href="../articles/procs-means.html">The Means Function</a>
    </li>
    <li>
      <a href="../articles/procs-dm.html">Data Manipulation Functions</a>
    </li>
    <li>
      <a href="../articles/procs-example1.html">Example 1: Demographics</a>
    </li>
    <li>
      <a href="../articles/procs-example2.html">Example 2: Adverse Events</a>
    </li>
    <li>
      <a href="../articles/procs-faq.html">Frequently Asked Questions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href=".././articles/procs-faq.html">FAQ</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/dbosak01/procs/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Example 1: Demographics</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dbosak01/procs/blob/HEAD/vignettes/procs-example1.Rmd" class="external-link"><code>vignettes/procs-example1.Rmd</code></a></small>
      <div class="hidden name"><code>procs-example1.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="program">Program<a class="anchor" aria-label="anchor" href="#program"></a>
</h2>
<p>The following example shows a complete program. The example
illustrates how <strong>procs</strong> functions work together, and
interact with other <strong>sassy</strong> functions to create a
demographics table with p-value statistics.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(sassy)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(procs)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co"># Prepare Log -------------------------------------------------------------</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="fu">options</span>(<span class="st">"logr.autolog"</span> <span class="ot">=</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>        <span class="st">"logr.on"</span> <span class="ot">=</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>        <span class="st">"logr.notes"</span> <span class="ot">=</span> <span class="cn">FALSE</span>,</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>        <span class="st">"procs.print"</span> <span class="ot">=</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="co"># Get temp directory</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">tempdir</span>()</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="co"># Open log</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a>lf <span class="ot">&lt;-</span> <span class="fu">log_open</span>(<span class="fu">file.path</span>(tmp, <span class="st">"example1.log"</span>))</span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="co"># Prepare formats ---------------------------------------------------------</span></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a><span class="fu">sep</span>(<span class="st">"Prepare formats"</span>)</span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Age categories"</span>)</span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a>agecat <span class="ot">&lt;-</span> <span class="fu">value</span>(<span class="fu">condition</span>(x <span class="sc">&gt;=</span> <span class="dv">18</span> <span class="sc">&amp;</span> x <span class="sc">&lt;=</span> <span class="dv">29</span>, <span class="st">"18 to 29"</span>),</span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a>                <span class="fu">condition</span>(x <span class="sc">&gt;=</span><span class="dv">30</span> <span class="sc">&amp;</span> x <span class="sc">&lt;=</span> <span class="dv">39</span>, <span class="st">"30 to 39"</span>),</span>
<span id="cb1-27"><a href="#cb1-27" tabindex="-1"></a>                <span class="fu">condition</span>(x <span class="sc">&gt;=</span><span class="dv">40</span> <span class="sc">&amp;</span> x <span class="sc">&lt;=</span><span class="dv">49</span>, <span class="st">"40 to 49"</span>),</span>
<span id="cb1-28"><a href="#cb1-28" tabindex="-1"></a>                <span class="fu">condition</span>(x <span class="sc">&gt;=</span> <span class="dv">50</span>, <span class="st">"&gt;= 50"</span>),</span>
<span id="cb1-29"><a href="#cb1-29" tabindex="-1"></a>                <span class="fu">condition</span>(<span class="cn">TRUE</span>, <span class="st">"Out of range"</span>)) </span>
<span id="cb1-30"><a href="#cb1-30" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Sex decodes"</span>)</span>
<span id="cb1-32"><a href="#cb1-32" tabindex="-1"></a>fmt_sex <span class="ot">&lt;-</span> <span class="fu">value</span>(<span class="fu">condition</span>(<span class="fu">is.na</span>(x), <span class="st">"Missing"</span>),</span>
<span id="cb1-33"><a href="#cb1-33" tabindex="-1"></a>                 <span class="fu">condition</span>(x <span class="sc">==</span> <span class="st">"M"</span>, <span class="st">"Male"</span>),</span>
<span id="cb1-34"><a href="#cb1-34" tabindex="-1"></a>                 <span class="fu">condition</span>(x <span class="sc">==</span> <span class="st">"F"</span>, <span class="st">"Female"</span>),</span>
<span id="cb1-35"><a href="#cb1-35" tabindex="-1"></a>                 <span class="fu">condition</span>(<span class="cn">TRUE</span>, <span class="st">"Other"</span>)) </span>
<span id="cb1-36"><a href="#cb1-36" tabindex="-1"></a></span>
<span id="cb1-37"><a href="#cb1-37" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Race decodes"</span>)</span>
<span id="cb1-38"><a href="#cb1-38" tabindex="-1"></a>fmt_race <span class="ot">&lt;-</span> <span class="fu">value</span>(<span class="fu">condition</span>(<span class="fu">is.na</span>(x), <span class="st">"Missing"</span>),</span>
<span id="cb1-39"><a href="#cb1-39" tabindex="-1"></a>                  <span class="fu">condition</span>(x <span class="sc">==</span> <span class="st">"WHITE"</span>, <span class="st">"White"</span>),</span>
<span id="cb1-40"><a href="#cb1-40" tabindex="-1"></a>                  <span class="fu">condition</span>(x <span class="sc">==</span> <span class="st">"BLACK"</span>, <span class="st">"Black or African American"</span>),</span>
<span id="cb1-41"><a href="#cb1-41" tabindex="-1"></a>                  <span class="fu">condition</span>(<span class="cn">TRUE</span>, <span class="st">"Other"</span>))</span>
<span id="cb1-42"><a href="#cb1-42" tabindex="-1"></a></span>
<span id="cb1-43"><a href="#cb1-43" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Compile format catalog"</span>)</span>
<span id="cb1-45"><a href="#cb1-45" tabindex="-1"></a>fc <span class="ot">&lt;-</span> <span class="fu">fcat</span>(<span class="at">MEAN =</span> <span class="st">"%.1f"</span>, <span class="at">STD =</span> <span class="st">"(%.2f)"</span>, </span>
<span id="cb1-46"><a href="#cb1-46" tabindex="-1"></a>           <span class="at">Q1 =</span> <span class="st">"%.1f"</span>, <span class="at">Q3 =</span> <span class="st">"%.1f"</span>,</span>
<span id="cb1-47"><a href="#cb1-47" tabindex="-1"></a>           <span class="at">MIN =</span> <span class="st">"%d"</span>, <span class="at">MAX =</span> <span class="st">"%d"</span>, </span>
<span id="cb1-48"><a href="#cb1-48" tabindex="-1"></a>           <span class="at">CNT =</span> <span class="st">"%2d"</span>, <span class="at">PCT =</span> <span class="st">"(%5.1f%%)"</span>,</span>
<span id="cb1-49"><a href="#cb1-49" tabindex="-1"></a>           <span class="at">AGECAT =</span> agecat,</span>
<span id="cb1-50"><a href="#cb1-50" tabindex="-1"></a>           <span class="at">SEX =</span> fmt_sex,</span>
<span id="cb1-51"><a href="#cb1-51" tabindex="-1"></a>           <span class="at">RACE =</span> fmt_race,</span>
<span id="cb1-52"><a href="#cb1-52" tabindex="-1"></a>           <span class="at">AOV.F =</span> <span class="st">"%5.3f"</span>,</span>
<span id="cb1-53"><a href="#cb1-53" tabindex="-1"></a>           <span class="at">AOV.P =</span> <span class="st">"(%5.3f)"</span>,</span>
<span id="cb1-54"><a href="#cb1-54" tabindex="-1"></a>           <span class="at">CHISQ =</span> <span class="st">"%5.3f"</span>,</span>
<span id="cb1-55"><a href="#cb1-55" tabindex="-1"></a>           <span class="at">CHISQ.P =</span> <span class="st">"(%5.3f)"</span>) </span>
<span id="cb1-56"><a href="#cb1-56" tabindex="-1"></a></span>
<span id="cb1-57"><a href="#cb1-57" tabindex="-1"></a></span>
<span id="cb1-58"><a href="#cb1-58" tabindex="-1"></a><span class="co"># Load and Prepare Data ---------------------------------------------------</span></span>
<span id="cb1-59"><a href="#cb1-59" tabindex="-1"></a></span>
<span id="cb1-60"><a href="#cb1-60" tabindex="-1"></a><span class="fu">sep</span>(<span class="st">"Prepare Data"</span>)</span>
<span id="cb1-61"><a href="#cb1-61" tabindex="-1"></a></span>
<span id="cb1-62"><a href="#cb1-62" tabindex="-1"></a></span>
<span id="cb1-63"><a href="#cb1-63" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Create sample ADSL data."</span>)</span>
<span id="cb1-64"><a href="#cb1-64" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">text =</span> <span class="st">'</span></span>
<span id="cb1-65"><a href="#cb1-65" tabindex="-1"></a><span class="st">  SUBJID  ARM    SEX  RACE    AGE</span></span>
<span id="cb1-66"><a href="#cb1-66" tabindex="-1"></a><span class="st">  "001"   "ARM A" "F"  "WHITE" 19 </span></span>
<span id="cb1-67"><a href="#cb1-67" tabindex="-1"></a><span class="st">  "002"   "ARM B" "F"  "WHITE" 21 </span></span>
<span id="cb1-68"><a href="#cb1-68" tabindex="-1"></a><span class="st">  "003"   "ARM C" "F"  "WHITE" 23 </span></span>
<span id="cb1-69"><a href="#cb1-69" tabindex="-1"></a><span class="st">  "004"   "ARM D" "F"  "BLACK" 28 </span></span>
<span id="cb1-70"><a href="#cb1-70" tabindex="-1"></a><span class="st">  "005"   "ARM A" "M"  "WHITE" 37  </span></span>
<span id="cb1-71"><a href="#cb1-71" tabindex="-1"></a><span class="st">  "006"   "ARM B" "M"  "WHITE" 34 </span></span>
<span id="cb1-72"><a href="#cb1-72" tabindex="-1"></a><span class="st">  "007"   "ARM C" "M"  "WHITE" 36  </span></span>
<span id="cb1-73"><a href="#cb1-73" tabindex="-1"></a><span class="st">  "008"   "ARM D" "M"  "WHITE" 30   </span></span>
<span id="cb1-74"><a href="#cb1-74" tabindex="-1"></a><span class="st">  "009"   "ARM A" "F"  "WHITE" 39  </span></span>
<span id="cb1-75"><a href="#cb1-75" tabindex="-1"></a><span class="st">  "010"   "ARM B" "F"  "WHITE" 31  </span></span>
<span id="cb1-76"><a href="#cb1-76" tabindex="-1"></a><span class="st">  "011"   "ARM C" "F"  "BLACK" 33 </span></span>
<span id="cb1-77"><a href="#cb1-77" tabindex="-1"></a><span class="st">  "012"   "ARM D" "F"  "WHITE" 38 </span></span>
<span id="cb1-78"><a href="#cb1-78" tabindex="-1"></a><span class="st">  "013"   "ARM A" "M"  "BLACK" 37 </span></span>
<span id="cb1-79"><a href="#cb1-79" tabindex="-1"></a><span class="st">  "014"   "ARM B" "M"  "WHITE" 34  </span></span>
<span id="cb1-80"><a href="#cb1-80" tabindex="-1"></a><span class="st">  "015"   "ARM C" "M"  "WHITE" 36</span></span>
<span id="cb1-81"><a href="#cb1-81" tabindex="-1"></a><span class="st">  "016"   "ARM A" "M"  "WHITE" 40'</span>)  </span>
<span id="cb1-82"><a href="#cb1-82" tabindex="-1"></a></span>
<span id="cb1-83"><a href="#cb1-83" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Categorize AGE"</span>)</span>
<span id="cb1-84"><a href="#cb1-84" tabindex="-1"></a>adsl<span class="sc">$</span>AGECAT <span class="ot">&lt;-</span> <span class="fu">fapply</span>(adsl<span class="sc">$</span>AGE, agecat) </span>
<span id="cb1-85"><a href="#cb1-85" tabindex="-1"></a></span>
<span id="cb1-86"><a href="#cb1-86" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Log starting dataset"</span>)</span>
<span id="cb1-87"><a href="#cb1-87" tabindex="-1"></a><span class="fu">put</span>(adsl)</span>
<span id="cb1-88"><a href="#cb1-88" tabindex="-1"></a></span>
<span id="cb1-89"><a href="#cb1-89" tabindex="-1"></a></span>
<span id="cb1-90"><a href="#cb1-90" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Get ARM population counts"</span>)</span>
<span id="cb1-91"><a href="#cb1-91" tabindex="-1"></a><span class="fu">proc_freq</span>(adsl, <span class="at">tables =</span> ARM, </span>
<span id="cb1-92"><a href="#cb1-92" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">v</span>(long, nopercent, nonobs)) <span class="ot">-&gt;</span> arm_pop</span>
<span id="cb1-93"><a href="#cb1-93" tabindex="-1"></a></span>
<span id="cb1-94"><a href="#cb1-94" tabindex="-1"></a><span class="co"># Age Summary Block -------------------------------------------------------</span></span>
<span id="cb1-95"><a href="#cb1-95" tabindex="-1"></a></span>
<span id="cb1-96"><a href="#cb1-96" tabindex="-1"></a><span class="fu">sep</span>(<span class="st">"Create summary statistics for age"</span>)</span>
<span id="cb1-97"><a href="#cb1-97" tabindex="-1"></a></span>
<span id="cb1-98"><a href="#cb1-98" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Call means procedure to get summary statistics for age"</span>)</span>
<span id="cb1-99"><a href="#cb1-99" tabindex="-1"></a><span class="fu">proc_means</span>(adsl, <span class="at">var =</span> AGE,</span>
<span id="cb1-100"><a href="#cb1-100" tabindex="-1"></a>           <span class="at">stats =</span> <span class="fu">v</span>(n, mean, std, median, q1, q3, min, max),</span>
<span id="cb1-101"><a href="#cb1-101" tabindex="-1"></a>           <span class="at">by =</span> ARM, </span>
<span id="cb1-102"><a href="#cb1-102" tabindex="-1"></a>           <span class="at">options =</span> <span class="fu">v</span>(notype, nofreq)) <span class="ot">-&gt;</span> age_stats </span>
<span id="cb1-103"><a href="#cb1-103" tabindex="-1"></a></span>
<span id="cb1-104"><a href="#cb1-104" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Combine stats"</span>)</span>
<span id="cb1-105"><a href="#cb1-105" tabindex="-1"></a><span class="fu">datastep</span>(age_stats, </span>
<span id="cb1-106"><a href="#cb1-106" tabindex="-1"></a>         <span class="at">format =</span> fc,</span>
<span id="cb1-107"><a href="#cb1-107" tabindex="-1"></a>         <span class="at">drop =</span> <span class="fu">find.names</span>(age_stats, <span class="at">start =</span> <span class="dv">4</span>), </span>
<span id="cb1-108"><a href="#cb1-108" tabindex="-1"></a>         {</span>
<span id="cb1-109"><a href="#cb1-109" tabindex="-1"></a>           <span class="st">`</span><span class="at">Mean (SD)</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">fapply2</span>(MEAN, STD)</span>
<span id="cb1-110"><a href="#cb1-110" tabindex="-1"></a>           Median <span class="ot">&lt;-</span> MEDIAN</span>
<span id="cb1-111"><a href="#cb1-111" tabindex="-1"></a>           <span class="st">`</span><span class="at">Q1 - Q3</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">fapply2</span>(Q1, Q3, <span class="at">sep =</span> <span class="st">" - "</span>)</span>
<span id="cb1-112"><a href="#cb1-112" tabindex="-1"></a>           <span class="st">`</span><span class="at">Min - Max</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">fapply2</span>(MIN, MAX, <span class="at">sep =</span> <span class="st">" - "</span>)</span>
<span id="cb1-113"><a href="#cb1-113" tabindex="-1"></a>           </span>
<span id="cb1-114"><a href="#cb1-114" tabindex="-1"></a>           </span>
<span id="cb1-115"><a href="#cb1-115" tabindex="-1"></a>         }) <span class="ot">-&gt;</span> age_comb</span>
<span id="cb1-116"><a href="#cb1-116" tabindex="-1"></a></span>
<span id="cb1-117"><a href="#cb1-117" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Transpose ARMs into columns"</span>)</span>
<span id="cb1-118"><a href="#cb1-118" tabindex="-1"></a><span class="fu">proc_transpose</span>(age_comb, </span>
<span id="cb1-119"><a href="#cb1-119" tabindex="-1"></a>               <span class="at">var =</span> <span class="fu">names</span>(age_comb),</span>
<span id="cb1-120"><a href="#cb1-120" tabindex="-1"></a>               <span class="at">copy =</span> VAR, <span class="at">id =</span> BY, </span>
<span id="cb1-121"><a href="#cb1-121" tabindex="-1"></a>               <span class="at">name =</span> LABEL) <span class="ot">-&gt;</span> age_trans </span>
<span id="cb1-122"><a href="#cb1-122" tabindex="-1"></a></span>
<span id="cb1-123"><a href="#cb1-123" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Calculate aov"</span>)</span>
<span id="cb1-124"><a href="#cb1-124" tabindex="-1"></a>age_aov <span class="ot">&lt;-</span> <span class="fu">aov</span>(AGE <span class="sc">~</span> ARM, <span class="at">data =</span> adsl) <span class="sc">|&gt;</span> </span>
<span id="cb1-125"><a href="#cb1-125" tabindex="-1"></a>  <span class="fu">summary</span>() </span>
<span id="cb1-126"><a href="#cb1-126" tabindex="-1"></a></span>
<span id="cb1-127"><a href="#cb1-127" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Get aov into proper data frame"</span>) </span>
<span id="cb1-128"><a href="#cb1-128" tabindex="-1"></a></span>
<span id="cb1-129"><a href="#cb1-129" tabindex="-1"></a>age_aov <span class="ot">&lt;-</span> age_aov[[<span class="dv">1</span>]][<span class="dv">1</span>, <span class="fu">c</span>(<span class="st">"F value"</span>, <span class="st">"Pr(&gt;F)"</span>)]</span>
<span id="cb1-130"><a href="#cb1-130" tabindex="-1"></a><span class="fu">names</span>(age_aov) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AOV.F"</span>, <span class="st">"AOV.P"</span>)</span>
<span id="cb1-131"><a href="#cb1-131" tabindex="-1"></a>age_aov <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(age_aov) <span class="sc">|&gt;</span> <span class="fu">put</span>()</span>
<span id="cb1-132"><a href="#cb1-132" tabindex="-1"></a></span>
<span id="cb1-133"><a href="#cb1-133" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Combine aov statistics"</span>)</span>
<span id="cb1-134"><a href="#cb1-134" tabindex="-1"></a><span class="fu">datastep</span>(age_aov, </span>
<span id="cb1-135"><a href="#cb1-135" tabindex="-1"></a>         <span class="at">keep =</span> PVALUE,</span>
<span id="cb1-136"><a href="#cb1-136" tabindex="-1"></a>         <span class="at">format =</span> fc,</span>
<span id="cb1-137"><a href="#cb1-137" tabindex="-1"></a>         {</span>
<span id="cb1-138"><a href="#cb1-138" tabindex="-1"></a>           PVALUE <span class="ot">&lt;-</span> <span class="fu">fapply2</span>(AOV.F, AOV.P)</span>
<span id="cb1-139"><a href="#cb1-139" tabindex="-1"></a>           </span>
<span id="cb1-140"><a href="#cb1-140" tabindex="-1"></a>         }) <span class="ot">-&gt;</span> age_aov_comb </span>
<span id="cb1-141"><a href="#cb1-141" tabindex="-1"></a></span>
<span id="cb1-142"><a href="#cb1-142" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Append aov"</span>)</span>
<span id="cb1-143"><a href="#cb1-143" tabindex="-1"></a><span class="fu">datastep</span>(age_trans, <span class="at">merge =</span> age_aov_comb, {}) <span class="ot">-&gt;</span> age_block</span>
<span id="cb1-144"><a href="#cb1-144" tabindex="-1"></a></span>
<span id="cb1-145"><a href="#cb1-145" tabindex="-1"></a><span class="co"># Sex Block ---------------------------------------------------------------</span></span>
<span id="cb1-146"><a href="#cb1-146" tabindex="-1"></a></span>
<span id="cb1-147"><a href="#cb1-147" tabindex="-1"></a><span class="fu">sep</span>(<span class="st">"Create frequency counts for SEX"</span>)</span>
<span id="cb1-148"><a href="#cb1-148" tabindex="-1"></a></span>
<span id="cb1-149"><a href="#cb1-149" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Get sex frequency counts"</span>)</span>
<span id="cb1-150"><a href="#cb1-150" tabindex="-1"></a><span class="fu">proc_freq</span>(adsl, <span class="at">tables =</span> SEX,</span>
<span id="cb1-151"><a href="#cb1-151" tabindex="-1"></a>          <span class="at">by =</span> ARM,</span>
<span id="cb1-152"><a href="#cb1-152" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">v</span>(nonobs)) <span class="ot">-&gt;</span> sex_freq </span>
<span id="cb1-153"><a href="#cb1-153" tabindex="-1"></a></span>
<span id="cb1-154"><a href="#cb1-154" tabindex="-1"></a></span>
<span id="cb1-155"><a href="#cb1-155" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Combine counts and percents."</span>)</span>
<span id="cb1-156"><a href="#cb1-156" tabindex="-1"></a><span class="fu">datastep</span>(sex_freq, </span>
<span id="cb1-157"><a href="#cb1-157" tabindex="-1"></a>         <span class="at">format =</span> fc, </span>
<span id="cb1-158"><a href="#cb1-158" tabindex="-1"></a>         <span class="at">rename =</span> <span class="fu">list</span>(<span class="at">CAT =</span> <span class="st">"LABEL"</span>),</span>
<span id="cb1-159"><a href="#cb1-159" tabindex="-1"></a>         <span class="at">drop =</span> <span class="fu">v</span>(CNT, PCT), </span>
<span id="cb1-160"><a href="#cb1-160" tabindex="-1"></a>         {</span>
<span id="cb1-161"><a href="#cb1-161" tabindex="-1"></a>           </span>
<span id="cb1-162"><a href="#cb1-162" tabindex="-1"></a>           CNTPCT <span class="ot">&lt;-</span> <span class="fu">fapply2</span>(CNT, PCT)</span>
<span id="cb1-163"><a href="#cb1-163" tabindex="-1"></a>           </span>
<span id="cb1-164"><a href="#cb1-164" tabindex="-1"></a>         }) <span class="ot">-&gt;</span> sex_comb </span>
<span id="cb1-165"><a href="#cb1-165" tabindex="-1"></a></span>
<span id="cb1-166"><a href="#cb1-166" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Transpose ARMs into columns"</span>)</span>
<span id="cb1-167"><a href="#cb1-167" tabindex="-1"></a><span class="fu">proc_transpose</span>(sex_comb, <span class="at">id =</span> BY, </span>
<span id="cb1-168"><a href="#cb1-168" tabindex="-1"></a>               <span class="at">var =</span> CNTPCT,</span>
<span id="cb1-169"><a href="#cb1-169" tabindex="-1"></a>               <span class="at">copy =</span> VAR, <span class="at">by =</span> LABEL) <span class="ot">-&gt;</span> sex_trans</span>
<span id="cb1-170"><a href="#cb1-170" tabindex="-1"></a></span>
<span id="cb1-171"><a href="#cb1-171" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Clean up"</span>)</span>
<span id="cb1-172"><a href="#cb1-172" tabindex="-1"></a><span class="fu">datastep</span>(sex_trans, <span class="at">drop =</span> NAME, </span>
<span id="cb1-173"><a href="#cb1-173" tabindex="-1"></a>         {</span>
<span id="cb1-174"><a href="#cb1-174" tabindex="-1"></a>           </span>
<span id="cb1-175"><a href="#cb1-175" tabindex="-1"></a>           LABEL <span class="ot">&lt;-</span> <span class="fu">fapply</span>(LABEL, fc<span class="sc">$</span>SEX)</span>
<span id="cb1-176"><a href="#cb1-176" tabindex="-1"></a>           LABEL <span class="ot">&lt;-</span> <span class="fu">factor</span>(LABEL, <span class="at">levels =</span> <span class="fu">levels</span>(fc<span class="sc">$</span>SEX))</span>
<span id="cb1-177"><a href="#cb1-177" tabindex="-1"></a>           </span>
<span id="cb1-178"><a href="#cb1-178" tabindex="-1"></a>         }) <span class="ot">-&gt;</span> sex_cnts</span>
<span id="cb1-179"><a href="#cb1-179" tabindex="-1"></a></span>
<span id="cb1-180"><a href="#cb1-180" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Sort by label"</span>)</span>
<span id="cb1-181"><a href="#cb1-181" tabindex="-1"></a><span class="fu">proc_sort</span>(sex_cnts, <span class="at">by =</span> LABEL) <span class="ot">-&gt;</span> sex_cnts </span>
<span id="cb1-182"><a href="#cb1-182" tabindex="-1"></a></span>
<span id="cb1-183"><a href="#cb1-183" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Get sex chisq"</span>)</span>
<span id="cb1-184"><a href="#cb1-184" tabindex="-1"></a><span class="fu">proc_freq</span>(adsl, <span class="at">tables =</span> <span class="fu">v</span>(SEX <span class="sc">*</span> ARM),</span>
<span id="cb1-185"><a href="#cb1-185" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">v</span>(chisq, notable)) <span class="ot">-&gt;</span> sex_chisq</span>
<span id="cb1-186"><a href="#cb1-186" tabindex="-1"></a></span>
<span id="cb1-187"><a href="#cb1-187" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Combine chisq statistics"</span>)</span>
<span id="cb1-188"><a href="#cb1-188" tabindex="-1"></a><span class="fu">datastep</span>(sex_chisq,</span>
<span id="cb1-189"><a href="#cb1-189" tabindex="-1"></a>         <span class="at">format =</span> fc,</span>
<span id="cb1-190"><a href="#cb1-190" tabindex="-1"></a>         <span class="at">keep =</span> PVALUE, </span>
<span id="cb1-191"><a href="#cb1-191" tabindex="-1"></a>         {</span>
<span id="cb1-192"><a href="#cb1-192" tabindex="-1"></a>           </span>
<span id="cb1-193"><a href="#cb1-193" tabindex="-1"></a>           PVALUE <span class="ot">=</span> <span class="fu">fapply2</span>(CHISQ, CHISQ.P)</span>
<span id="cb1-194"><a href="#cb1-194" tabindex="-1"></a>         }) <span class="ot">-&gt;</span> sex_chisq_comb </span>
<span id="cb1-195"><a href="#cb1-195" tabindex="-1"></a></span>
<span id="cb1-196"><a href="#cb1-196" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Append chisq"</span>)</span>
<span id="cb1-197"><a href="#cb1-197" tabindex="-1"></a><span class="fu">datastep</span>(sex_cnts, </span>
<span id="cb1-198"><a href="#cb1-198" tabindex="-1"></a>         <span class="at">merge =</span> sex_chisq_comb, </span>
<span id="cb1-199"><a href="#cb1-199" tabindex="-1"></a>         {}) <span class="ot">-&gt;</span> sex_block</span>
<span id="cb1-200"><a href="#cb1-200" tabindex="-1"></a></span>
<span id="cb1-201"><a href="#cb1-201" tabindex="-1"></a></span>
<span id="cb1-202"><a href="#cb1-202" tabindex="-1"></a><span class="co"># Race block --------------------------------------------------------------</span></span>
<span id="cb1-203"><a href="#cb1-203" tabindex="-1"></a></span>
<span id="cb1-204"><a href="#cb1-204" tabindex="-1"></a></span>
<span id="cb1-205"><a href="#cb1-205" tabindex="-1"></a><span class="fu">sep</span>(<span class="st">"Create frequency counts for RACE"</span>)</span>
<span id="cb1-206"><a href="#cb1-206" tabindex="-1"></a></span>
<span id="cb1-207"><a href="#cb1-207" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Get race frequency counts"</span>)</span>
<span id="cb1-208"><a href="#cb1-208" tabindex="-1"></a><span class="fu">proc_freq</span>(adsl, <span class="at">tables =</span> RACE,</span>
<span id="cb1-209"><a href="#cb1-209" tabindex="-1"></a>          <span class="at">by =</span> ARM,</span>
<span id="cb1-210"><a href="#cb1-210" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">v</span>(nonobs)) <span class="ot">-&gt;</span> race_freq </span>
<span id="cb1-211"><a href="#cb1-211" tabindex="-1"></a></span>
<span id="cb1-212"><a href="#cb1-212" tabindex="-1"></a></span>
<span id="cb1-213"><a href="#cb1-213" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Combine counts and percents."</span>)</span>
<span id="cb1-214"><a href="#cb1-214" tabindex="-1"></a><span class="fu">datastep</span>(race_freq, </span>
<span id="cb1-215"><a href="#cb1-215" tabindex="-1"></a>         <span class="at">format =</span> fc, </span>
<span id="cb1-216"><a href="#cb1-216" tabindex="-1"></a>         <span class="at">rename =</span> <span class="fu">list</span>(<span class="at">CAT =</span> <span class="st">"LABEL"</span>),</span>
<span id="cb1-217"><a href="#cb1-217" tabindex="-1"></a>         <span class="at">drop =</span> <span class="fu">v</span>(CNT, PCT), </span>
<span id="cb1-218"><a href="#cb1-218" tabindex="-1"></a>         {</span>
<span id="cb1-219"><a href="#cb1-219" tabindex="-1"></a>           </span>
<span id="cb1-220"><a href="#cb1-220" tabindex="-1"></a>           CNTPCT <span class="ot">&lt;-</span> <span class="fu">fapply2</span>(CNT, PCT)</span>
<span id="cb1-221"><a href="#cb1-221" tabindex="-1"></a>           </span>
<span id="cb1-222"><a href="#cb1-222" tabindex="-1"></a>         }) <span class="ot">-&gt;</span> race_comb </span>
<span id="cb1-223"><a href="#cb1-223" tabindex="-1"></a></span>
<span id="cb1-224"><a href="#cb1-224" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Transpose ARMs into columns"</span>)</span>
<span id="cb1-225"><a href="#cb1-225" tabindex="-1"></a><span class="fu">proc_transpose</span>(race_comb, <span class="at">id =</span> BY, <span class="at">var =</span> CNTPCT,</span>
<span id="cb1-226"><a href="#cb1-226" tabindex="-1"></a>               <span class="at">copy =</span> VAR, <span class="at">by =</span> LABEL) <span class="ot">-&gt;</span> race_trans</span>
<span id="cb1-227"><a href="#cb1-227" tabindex="-1"></a></span>
<span id="cb1-228"><a href="#cb1-228" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Clean up"</span>)</span>
<span id="cb1-229"><a href="#cb1-229" tabindex="-1"></a>           </span>
<span id="cb1-230"><a href="#cb1-230" tabindex="-1"></a>           LABEL <span class="ot">&lt;-</span> <span class="fu">fapply</span>(LABEL, fc<span class="sc">$</span>RACE)</span>
<span id="cb1-231"><a href="#cb1-231" tabindex="-1"></a>           LABEL <span class="ot">&lt;-</span> <span class="fu">factor</span>(LABEL, <span class="at">levels =</span> <span class="fu">levels</span>(fc<span class="sc">$</span>RACE))</span>
<span id="cb1-232"><a href="#cb1-232" tabindex="-1"></a>           </span>
<span id="cb1-233"><a href="#cb1-233" tabindex="-1"></a>         <span class="er">})</span> <span class="ot">-&gt;</span> race_cnts </span>
<span id="cb1-234"><a href="#cb1-234" tabindex="-1"></a><span class="fu">datastep</span>(race_trans, <span class="at">drop =</span> NAME,</span>
<span id="cb1-235"><a href="#cb1-235" tabindex="-1"></a>         <span class="at">where =</span> <span class="fu">expression</span>(del <span class="sc">==</span> <span class="cn">FALSE</span>),</span>
<span id="cb1-236"><a href="#cb1-236" tabindex="-1"></a>         {</span>
<span id="cb1-237"><a href="#cb1-237" tabindex="-1"></a></span>
<span id="cb1-238"><a href="#cb1-238" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Sort by label"</span>)</span>
<span id="cb1-239"><a href="#cb1-239" tabindex="-1"></a><span class="fu">proc_sort</span>(race_cnts, <span class="at">by =</span> LABEL) <span class="ot">-&gt;</span> race_cnts </span>
<span id="cb1-240"><a href="#cb1-240" tabindex="-1"></a></span>
<span id="cb1-241"><a href="#cb1-241" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Get race chisq"</span>)</span>
<span id="cb1-242"><a href="#cb1-242" tabindex="-1"></a><span class="fu">proc_freq</span>(adsl, <span class="at">tables =</span> RACE <span class="sc">*</span> ARM,</span>
<span id="cb1-243"><a href="#cb1-243" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">v</span>(chisq, notable)) <span class="ot">-&gt;</span> race_chisq </span>
<span id="cb1-244"><a href="#cb1-244" tabindex="-1"></a></span>
<span id="cb1-245"><a href="#cb1-245" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Combine chisq statistics"</span>)</span>
<span id="cb1-246"><a href="#cb1-246" tabindex="-1"></a><span class="fu">datastep</span>(race_chisq,</span>
<span id="cb1-247"><a href="#cb1-247" tabindex="-1"></a>         <span class="at">format =</span> fc,</span>
<span id="cb1-248"><a href="#cb1-248" tabindex="-1"></a>         <span class="at">keep =</span> <span class="fu">c</span>(<span class="st">"PVALUE"</span>), </span>
<span id="cb1-249"><a href="#cb1-249" tabindex="-1"></a>         {</span>
<span id="cb1-250"><a href="#cb1-250" tabindex="-1"></a>           </span>
<span id="cb1-251"><a href="#cb1-251" tabindex="-1"></a>           PVALUE <span class="ot">=</span> <span class="fu">fapply2</span>(CHISQ, CHISQ.P)</span>
<span id="cb1-252"><a href="#cb1-252" tabindex="-1"></a>         }) <span class="ot">-&gt;</span> race_chisq_comb</span>
<span id="cb1-253"><a href="#cb1-253" tabindex="-1"></a></span>
<span id="cb1-254"><a href="#cb1-254" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Append chisq"</span>)</span>
<span id="cb1-255"><a href="#cb1-255" tabindex="-1"></a><span class="fu">datastep</span>(race_cnts, <span class="at">merge =</span> race_chisq_comb, {}) <span class="ot">-&gt;</span> race_block</span>
<span id="cb1-256"><a href="#cb1-256" tabindex="-1"></a></span>
<span id="cb1-257"><a href="#cb1-257" tabindex="-1"></a></span>
<span id="cb1-258"><a href="#cb1-258" tabindex="-1"></a><span class="co"># Age Group Block ----------------------------------------------------------</span></span>
<span id="cb1-259"><a href="#cb1-259" tabindex="-1"></a></span>
<span id="cb1-260"><a href="#cb1-260" tabindex="-1"></a><span class="fu">sep</span>(<span class="st">"Create frequency counts for Age Group"</span>)</span>
<span id="cb1-261"><a href="#cb1-261" tabindex="-1"></a></span>
<span id="cb1-262"><a href="#cb1-262" tabindex="-1"></a></span>
<span id="cb1-263"><a href="#cb1-263" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Get age group frequency counts"</span>)</span>
<span id="cb1-264"><a href="#cb1-264" tabindex="-1"></a><span class="fu">proc_freq</span>(adsl,</span>
<span id="cb1-265"><a href="#cb1-265" tabindex="-1"></a>          <span class="at">table =</span> AGECAT,</span>
<span id="cb1-266"><a href="#cb1-266" tabindex="-1"></a>          <span class="at">by =</span> ARM,</span>
<span id="cb1-267"><a href="#cb1-267" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">v</span>(nonobs)) <span class="ot">-&gt;</span> ageg_freq</span>
<span id="cb1-268"><a href="#cb1-268" tabindex="-1"></a></span>
<span id="cb1-269"><a href="#cb1-269" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Combine counts and percents and assign age group factor for sorting"</span>)</span>
<span id="cb1-270"><a href="#cb1-270" tabindex="-1"></a><span class="fu">datastep</span>(ageg_freq,</span>
<span id="cb1-271"><a href="#cb1-271" tabindex="-1"></a>         <span class="at">format =</span> fc,</span>
<span id="cb1-272"><a href="#cb1-272" tabindex="-1"></a>         <span class="at">keep =</span> <span class="fu">v</span>(VAR, LABEL, BY, CNTPCT),</span>
<span id="cb1-273"><a href="#cb1-273" tabindex="-1"></a>         {</span>
<span id="cb1-274"><a href="#cb1-274" tabindex="-1"></a>           CNTPCT <span class="ot">&lt;-</span> <span class="fu">fapply2</span>(CNT, PCT)</span>
<span id="cb1-275"><a href="#cb1-275" tabindex="-1"></a>           LABEL <span class="ot">&lt;-</span> <span class="fu">factor</span>(CAT, <span class="at">levels =</span> <span class="fu">levels</span>(fc<span class="sc">$</span>AGECAT))</span>
<span id="cb1-276"><a href="#cb1-276" tabindex="-1"></a>         }) <span class="ot">-&gt;</span> ageg_comb</span>
<span id="cb1-277"><a href="#cb1-277" tabindex="-1"></a></span>
<span id="cb1-278"><a href="#cb1-278" tabindex="-1"></a></span>
<span id="cb1-279"><a href="#cb1-279" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Sort by age group factor"</span>)</span>
<span id="cb1-280"><a href="#cb1-280" tabindex="-1"></a><span class="fu">proc_sort</span>(ageg_comb, <span class="at">by =</span> <span class="fu">v</span>(BY, LABEL)) <span class="ot">-&gt;</span> ageg_sort </span>
<span id="cb1-281"><a href="#cb1-281" tabindex="-1"></a></span>
<span id="cb1-282"><a href="#cb1-282" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Tranpose age group block"</span>)</span>
<span id="cb1-283"><a href="#cb1-283" tabindex="-1"></a><span class="fu">proc_transpose</span>(ageg_sort,</span>
<span id="cb1-284"><a href="#cb1-284" tabindex="-1"></a>               <span class="at">var =</span> CNTPCT,</span>
<span id="cb1-285"><a href="#cb1-285" tabindex="-1"></a>               <span class="at">copy =</span> VAR,</span>
<span id="cb1-286"><a href="#cb1-286" tabindex="-1"></a>               <span class="at">id =</span> BY,</span>
<span id="cb1-287"><a href="#cb1-287" tabindex="-1"></a>               <span class="at">by =</span> LABEL) <span class="ot">-&gt;</span> ageg_trans </span>
<span id="cb1-288"><a href="#cb1-288" tabindex="-1"></a></span>
<span id="cb1-289"><a href="#cb1-289" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Some clean up"</span>)</span>
<span id="cb1-290"><a href="#cb1-290" tabindex="-1"></a><span class="fu">datastep</span>(ageg_trans,</span>
<span id="cb1-291"><a href="#cb1-291" tabindex="-1"></a>         <span class="at">drop =</span> NAME,</span>
<span id="cb1-292"><a href="#cb1-292" tabindex="-1"></a>         {}) <span class="ot">-&gt;</span> ageg_cnts </span>
<span id="cb1-293"><a href="#cb1-293" tabindex="-1"></a></span>
<span id="cb1-294"><a href="#cb1-294" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Get ageg chisq"</span>)</span>
<span id="cb1-295"><a href="#cb1-295" tabindex="-1"></a><span class="fu">proc_freq</span>(adsl, <span class="at">tables =</span> AGECAT <span class="sc">*</span> ARM,</span>
<span id="cb1-296"><a href="#cb1-296" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">v</span>(chisq, notable)) <span class="ot">-&gt;</span> ageg_chisq </span>
<span id="cb1-297"><a href="#cb1-297" tabindex="-1"></a></span>
<span id="cb1-298"><a href="#cb1-298" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Combine chisq statistics"</span>)</span>
<span id="cb1-299"><a href="#cb1-299" tabindex="-1"></a><span class="fu">datastep</span>(ageg_chisq,</span>
<span id="cb1-300"><a href="#cb1-300" tabindex="-1"></a>         <span class="at">format =</span> fc,</span>
<span id="cb1-301"><a href="#cb1-301" tabindex="-1"></a>         <span class="at">keep =</span> <span class="fu">c</span>(<span class="st">"PVALUE"</span>), </span>
<span id="cb1-302"><a href="#cb1-302" tabindex="-1"></a>         {</span>
<span id="cb1-303"><a href="#cb1-303" tabindex="-1"></a>           PVALUE <span class="ot">=</span> <span class="fu">fapply2</span>(CHISQ, CHISQ.P)</span>
<span id="cb1-304"><a href="#cb1-304" tabindex="-1"></a>         }) <span class="ot">-&gt;</span> ageg_chisq_comb </span>
<span id="cb1-305"><a href="#cb1-305" tabindex="-1"></a></span>
<span id="cb1-306"><a href="#cb1-306" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Append chisq"</span>)</span>
<span id="cb1-307"><a href="#cb1-307" tabindex="-1"></a><span class="fu">datastep</span>(ageg_cnts, <span class="at">merge =</span> ageg_chisq_comb, </span>
<span id="cb1-308"><a href="#cb1-308" tabindex="-1"></a>         {}) <span class="ot">-&gt;</span> ageg_block</span>
<span id="cb1-309"><a href="#cb1-309" tabindex="-1"></a></span>
<span id="cb1-310"><a href="#cb1-310" tabindex="-1"></a></span>
<span id="cb1-311"><a href="#cb1-311" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Combine blocks into final data frame"</span>)</span>
<span id="cb1-312"><a href="#cb1-312" tabindex="-1"></a><span class="fu">datastep</span>(age_block, </span>
<span id="cb1-313"><a href="#cb1-313" tabindex="-1"></a>         <span class="at">set =</span> <span class="fu">list</span>(ageg_block, sex_block, race_block),</span>
<span id="cb1-314"><a href="#cb1-314" tabindex="-1"></a>         {}) <span class="ot">-&gt;</span> final</span>
<span id="cb1-315"><a href="#cb1-315" tabindex="-1"></a></span>
<span id="cb1-316"><a href="#cb1-316" tabindex="-1"></a><span class="co"># Report ------------------------------------------------------------------</span></span>
<span id="cb1-317"><a href="#cb1-317" tabindex="-1"></a></span>
<span id="cb1-318"><a href="#cb1-318" tabindex="-1"></a></span>
<span id="cb1-319"><a href="#cb1-319" tabindex="-1"></a><span class="fu">sep</span>(<span class="st">"Create and print report"</span>)</span>
<span id="cb1-320"><a href="#cb1-320" tabindex="-1"></a></span>
<span id="cb1-321"><a href="#cb1-321" tabindex="-1"></a>var_fmt <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AGE"</span> <span class="ot">=</span> <span class="st">"Age"</span>, <span class="st">"AGECAT"</span> <span class="ot">=</span> <span class="st">"Age Group"</span>, <span class="st">"SEX"</span> <span class="ot">=</span> <span class="st">"Sex"</span>, <span class="st">"RACE"</span> <span class="ot">=</span> <span class="st">"Race"</span>)</span>
<span id="cb1-322"><a href="#cb1-322" tabindex="-1"></a></span>
<span id="cb1-323"><a href="#cb1-323" tabindex="-1"></a>plbl <span class="ot">&lt;-</span> <span class="st">"Tests of Association{supsc('1')}</span><span class="sc">\n</span><span class="st"> Value (P-Value)"</span></span>
<span id="cb1-324"><a href="#cb1-324" tabindex="-1"></a></span>
<span id="cb1-325"><a href="#cb1-325" tabindex="-1"></a><span class="co"># Create Table</span></span>
<span id="cb1-326"><a href="#cb1-326" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> <span class="fu">create_table</span>(final, <span class="at">first_row_blank =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb1-327"><a href="#cb1-327" tabindex="-1"></a>  <span class="fu">column_defaults</span>(<span class="at">from =</span> <span class="st">`</span><span class="at">ARM A</span><span class="st">`</span>, <span class="at">to =</span> <span class="st">`</span><span class="at">ARM D</span><span class="st">`</span>, <span class="at">align =</span> <span class="st">"center"</span>, <span class="at">width =</span> <span class="fl">1.1</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb1-328"><a href="#cb1-328" tabindex="-1"></a>  <span class="fu">stub</span>(<span class="at">vars =</span> <span class="fu">c</span>(<span class="st">"VAR"</span>, <span class="st">"LABEL"</span>), <span class="st">"Variable"</span>, <span class="at">width =</span> <span class="fl">2.5</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb1-329"><a href="#cb1-329" tabindex="-1"></a>  <span class="fu">define</span>(VAR, <span class="at">blank_after =</span> <span class="cn">TRUE</span>, <span class="at">dedupe =</span> <span class="cn">TRUE</span>, <span class="at">label =</span> <span class="st">"Variable"</span>,</span>
<span id="cb1-330"><a href="#cb1-330" tabindex="-1"></a>         <span class="at">format =</span> var_fmt,<span class="at">label_row =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb1-331"><a href="#cb1-331" tabindex="-1"></a>  <span class="fu">define</span>(LABEL, <span class="at">indent =</span> .<span class="dv">25</span>, <span class="at">label =</span> <span class="st">"Demographic Category"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-332"><a href="#cb1-332" tabindex="-1"></a>  <span class="fu">define</span>(<span class="st">`</span><span class="at">ARM A</span><span class="st">`</span>,  <span class="at">label =</span> <span class="st">"Placebo"</span>, <span class="at">n =</span> arm_pop[<span class="st">"ARM A"</span>]) <span class="sc">|&gt;</span>  </span>
<span id="cb1-333"><a href="#cb1-333" tabindex="-1"></a>  <span class="fu">define</span>(<span class="st">`</span><span class="at">ARM B</span><span class="st">`</span>,  <span class="at">label =</span> <span class="st">"Drug 50mg"</span>, <span class="at">n =</span> arm_pop[<span class="st">"ARM B"</span>]) <span class="sc">|&gt;</span>  </span>
<span id="cb1-334"><a href="#cb1-334" tabindex="-1"></a>  <span class="fu">define</span>(<span class="st">`</span><span class="at">ARM C</span><span class="st">`</span>,  <span class="at">label =</span> <span class="st">"Drug 100mg"</span>, <span class="at">n =</span> arm_pop[<span class="st">"ARM C"</span>]) <span class="sc">|&gt;</span>  </span>
<span id="cb1-335"><a href="#cb1-335" tabindex="-1"></a>  <span class="fu">define</span>(<span class="st">`</span><span class="at">ARM D</span><span class="st">`</span>,  <span class="at">label =</span> <span class="st">"Competitor"</span>, <span class="at">n =</span> arm_pop[<span class="st">"ARM D"</span>]) <span class="sc">|&gt;</span>  </span>
<span id="cb1-336"><a href="#cb1-336" tabindex="-1"></a>  <span class="fu">define</span>(PVALUE, <span class="at">label =</span> plbl, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">dedupe =</span> <span class="cn">TRUE</span>, <span class="at">align =</span> <span class="st">"center"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-337"><a href="#cb1-337" tabindex="-1"></a>  <span class="fu">titles</span>(<span class="st">"Table 1.0"</span>, <span class="st">"Analysis of Demographic Characteristics"</span>, </span>
<span id="cb1-338"><a href="#cb1-338" tabindex="-1"></a>         <span class="st">"Safety Population"</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-339"><a href="#cb1-339" tabindex="-1"></a>  <span class="fu">footnotes</span>(<span class="st">"Program: DM_Table.R"</span>,</span>
<span id="cb1-340"><a href="#cb1-340" tabindex="-1"></a>            <span class="st">"NOTE: Denominator based on number of non-missing responses."</span>,</span>
<span id="cb1-341"><a href="#cb1-341" tabindex="-1"></a>            <span class="st">"{supsc('1')}Pearson's Chi-Square tests will be used for "</span></span>
<span id="cb1-342"><a href="#cb1-342" tabindex="-1"></a>            <span class="sc">%p%</span> <span class="st">"Categorical variables and ANOVA tests for continuous variables."</span>) </span>
<span id="cb1-343"><a href="#cb1-343" tabindex="-1"></a></span>
<span id="cb1-344"><a href="#cb1-344" tabindex="-1"></a>rpt <span class="ot">&lt;-</span> <span class="fu">create_report</span>(<span class="fu">file.path</span>(tmp, <span class="st">"ProcsDemoDM.rtf"</span>), </span>
<span id="cb1-345"><a href="#cb1-345" tabindex="-1"></a>                     <span class="at">output_type =</span> <span class="st">"RTF"</span>, </span>
<span id="cb1-346"><a href="#cb1-346" tabindex="-1"></a>                     <span class="at">font =</span> <span class="st">"Times"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-347"><a href="#cb1-347" tabindex="-1"></a>  <span class="fu">page_header</span>(<span class="st">"Sponsor: Company"</span>, <span class="st">"Study: ABC"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-348"><a href="#cb1-348" tabindex="-1"></a>  <span class="fu">set_margins</span>(<span class="at">top =</span> <span class="dv">1</span>, <span class="at">bottom =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb1-349"><a href="#cb1-349" tabindex="-1"></a>  <span class="fu">add_content</span>(tbl) <span class="sc">|&gt;</span> </span>
<span id="cb1-350"><a href="#cb1-350" tabindex="-1"></a>  <span class="fu">page_footer</span>(<span class="st">"Date Produced: {Sys.Date()}"</span>, <span class="at">right =</span> <span class="st">"Page [pg] of [tpg]"</span>)</span>
<span id="cb1-351"><a href="#cb1-351" tabindex="-1"></a></span>
<span id="cb1-352"><a href="#cb1-352" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Write out the report"</span>)</span>
<span id="cb1-353"><a href="#cb1-353" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">write_report</span>(rpt)</span>
<span id="cb1-354"><a href="#cb1-354" tabindex="-1"></a></span>
<span id="cb1-355"><a href="#cb1-355" tabindex="-1"></a><span class="co"># Clean Up ----------------------------------------------------------------</span></span>
<span id="cb1-356"><a href="#cb1-356" tabindex="-1"></a><span class="fu">sep</span>(<span class="st">"Clean Up"</span>)</span>
<span id="cb1-357"><a href="#cb1-357" tabindex="-1"></a></span>
<span id="cb1-358"><a href="#cb1-358" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Unload libname"</span>)</span>
<span id="cb1-359"><a href="#cb1-359" tabindex="-1"></a><span class="fu">lib_unload</span>(sdtm)</span>
<span id="cb1-360"><a href="#cb1-360" tabindex="-1"></a></span>
<span id="cb1-361"><a href="#cb1-361" tabindex="-1"></a><span class="fu">put</span>(<span class="st">"Close log"</span>)</span>
<span id="cb1-362"><a href="#cb1-362" tabindex="-1"></a><span class="fu">log_close</span>()</span>
<span id="cb1-363"><a href="#cb1-363" tabindex="-1"></a></span>
<span id="cb1-364"><a href="#cb1-364" tabindex="-1"></a></span>
<span id="cb1-365"><a href="#cb1-365" tabindex="-1"></a><span class="co"># Uncomment to view report</span></span>
<span id="cb1-366"><a href="#cb1-366" tabindex="-1"></a><span class="co"># file.show(res$modified_path)</span></span>
<span id="cb1-367"><a href="#cb1-367" tabindex="-1"></a></span>
<span id="cb1-368"><a href="#cb1-368" tabindex="-1"></a><span class="co"># Uncomment to view log</span></span>
<span id="cb1-369"><a href="#cb1-369" tabindex="-1"></a><span class="co"># file.show(lf)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="output">Output<a class="anchor" aria-label="anchor" href="#output"></a>
</h2>
<p>Here is the output:</p>
<p><img src="../man/images/demog.png"></p>
</div>
<div class="section level2">
<h2 id="log">Log<a class="anchor" aria-label="anchor" href="#log"></a>
</h2>
<p>And here is the log:</p>
<pre><code>=========================================================================
Log Path: C:/Users/dbosa/AppData/Local/Temp/RtmpKQddL7/log/example1.log
Program Path: C:/Projects/Archytas/Demo/example1.R
Working Directory: C:/Projects/Archytas/Demo
User Name: dbosa
R Version: 4.2.1 (2022-06-23 ucrt)
Machine: SOCRATES x86-64
Operating System: Windows 10 x64 build 19044
Base Packages: stats graphics grDevices utils datasets methods base Other
Packages: tidylog_1.0.2 procs_0.0.9007 reporter_1.3.7 libr_1.2.6 fmtr_1.5.9
logr_1.3.3 common_1.0.5 sassy_1.0.8
Log Start Time: 2022-10-15 20:01:02
=========================================================================

=========================================================================
Prepare formats
=========================================================================

Age categories

# A user-defined format: 5 conditions
  Name Type        Expression        Label Order
1  obj    U x &gt;= 18 &amp; x &lt;= 29     18 to 29    NA
2  obj    U x &gt;= 30 &amp; x &lt;= 39     30 to 39    NA
3  obj    U x &gt;= 40 &amp; x &lt;= 49     40 to 49    NA
4  obj    U           x &gt;= 50        &gt;= 50    NA
5  obj    U              TRUE Out of range    NA

Sex decodes

# A user-defined format: 4 conditions
  Name Type Expression   Label Order
1  obj    U   is.na(x) Missing    NA
2  obj    U   x == "M"    Male    NA
3  obj    U   x == "F"  Female    NA
4  obj    U       TRUE   Other    NA

Race decodes

# A user-defined format: 4 conditions
  Name Type   Expression                     Label Order
1  obj    U     is.na(x)                   Missing    NA
2  obj    U x == "WHITE"                     White    NA
3  obj    U x == "BLACK" Black or African American    NA
4  obj    U         TRUE                     Other    NA

Compile format catalog

# A format catalog: 15 formats
- $MEAN: type S, "%.1f"
- $STD: type S, "(%.2f)"
- $Q1: type S, "%.1f"
- $Q3: type S, "%.1f"
- $MIN: type S, "%d"
- $MAX: type S, "%d"
- $CNT: type S, "%2d"
- $PCT: type S, "(%5.1f%%)"
- $AGECAT: type U, 5 conditions
- $SEX: type U, 4 conditions
- $RACE: type U, 4 conditions
- $AOV.F: type S, "%5.3f"
- $AOV.P: type S, "(%5.3f)"
- $CHISQ: type S, "%5.3f"
- $CHISQ.P: type S, "(%5.3f)"

=========================================================================
Prepare Data
=========================================================================

Create sample ADSL data.

Categorize AGE

Log starting dataset

   SUBJID   ARM SEX  RACE AGE   AGECAT
1       1 ARM A   F WHITE  19 18 to 29
2       2 ARM B   F WHITE  21 18 to 29
3       3 ARM C   F WHITE  23 18 to 29
4       4 ARM D   F BLACK  28 18 to 29
5       5 ARM A   M WHITE  37 30 to 39
6       6 ARM B   M WHITE  34 30 to 39
7       7 ARM C   M WHITE  36 30 to 39
8       8 ARM D   M WHITE  30 30 to 39
9       9 ARM A   F WHITE  39 30 to 39
10     10 ARM B   F WHITE  31 30 to 39
11     11 ARM C   F BLACK  33 30 to 39
12     12 ARM D   F WHITE  38 30 to 39
13     13 ARM A   M BLACK  37 30 to 39
14     14 ARM B   M WHITE  34 30 to 39
15     15 ARM C   M WHITE  36 30 to 39
16     16 ARM A   M WHITE  40 40 to 49

Get ARM population counts

proc_freq: input data set 16 rows and 6 columns
           tables: ARM
           view: TRUE
           output: 1 datasets

  VAR STAT ARM A ARM B ARM C ARM D
1 ARM  CNT     5     4     4     3

=========================================================================
Create summary statistics for age
=========================================================================

Call means procedure to get summary statistics for age

proc_means: input data set 16 rows and 6 columns
            by: ARM
            var: AGE
            stats: n mean std median q1 q3 min max
            view: TRUE
            output: 1 datasets

     BY VAR N MEAN      STD MEDIAN Q1 Q3 MIN MAX
1 ARM A AGE 5 34.4 8.706320   37.0 37 39  19  40
2 ARM B AGE 4 30.0 6.164414   32.5 26 34  21  34
3 ARM C AGE 4 32.0 6.164414   34.5 28 36  23  36
4 ARM D AGE 3 32.0 5.291503   30.0 28 38  28  38

Combine stats

datastep: columns decreased from 10 to 7

     BY VAR N   Mean (SD) Median     Q1 - Q3 Min - Max
1 ARM A AGE 5 34.4 (8.71)   37.0 37.0 - 39.0   19 - 40
2 ARM B AGE 4 30.0 (6.16)   32.5 26.0 - 34.0   21 - 34
3 ARM C AGE 4 32.0 (6.16)   34.5 28.0 - 36.0   23 - 36
4 ARM D AGE 3 32.0 (5.29)   30.0 28.0 - 38.0   28 - 38

Transpose ARMs into columns

proc_transpose: input data set 4 rows and 7 columns
                var: BY VAR N Mean (SD) Median Q1 - Q3 Min - Max
                id: BY
                copy: VAR
                name: LABEL
                output dataset 5 rows and 6 columns

  VAR     LABEL       ARM A       ARM B       ARM C       ARM D
1 AGE         N           5           4           4           3
2 AGE Mean (SD) 34.4 (8.71) 30.0 (6.16) 32.0 (6.16) 32.0 (5.29)
3 AGE    Median        37.0        32.5        34.5        30.0
4 AGE   Q1 - Q3 37.0 - 39.0 26.0 - 34.0 28.0 - 36.0 28.0 - 38.0
5 AGE Min - Max     19 - 40     21 - 34     23 - 36     28 - 38

Calculate aov

Get aov into proper data frame

                AOV.F     AOV.P
ARM         0.2983651 0.8259486

Combine aov statistics

datastep: columns decreased from 2 to 1

         PVALUE
1 0.298 (0.826)

Append aov

datastep: columns increased from 6 to 7

  VAR     LABEL       ARM A       ARM B       ARM C       ARM D        PVALUE
1 AGE         N           5           4           4           3 0.298 (0.826)
2 AGE Mean (SD) 34.4 (8.71) 30.0 (6.16) 32.0 (6.16) 32.0 (5.29)          &lt;NA&gt;
3 AGE    Median        37.0        32.5        34.5        30.0          &lt;NA&gt;
4 AGE   Q1 - Q3 37.0 - 39.0 26.0 - 34.0 28.0 - 36.0 28.0 - 38.0          &lt;NA&gt;
5 AGE Min - Max     19 - 40     21 - 34     23 - 36     28 - 38          &lt;NA&gt;

=========================================================================
Create frequency counts for SEX
=========================================================================

Get sex frequency counts

proc_freq: input data set 16 rows and 6 columns
           tables: SEX
           by: ARM
           view: TRUE
           output: 1 datasets

     BY VAR CAT CNT      PCT
1 ARM A SEX   F   2 40.00000
2 ARM A SEX   M   3 60.00000
3 ARM B SEX   F   2 50.00000
4 ARM B SEX   M   2 50.00000
5 ARM C SEX   F   2 50.00000
6 ARM C SEX   M   2 50.00000
7 ARM D SEX   F   2 66.66667
8 ARM D SEX   M   1 33.33333

Combine counts and percents.

datastep: columns decreased from 5 to 4

     BY VAR LABEL      CNTPCT
1 ARM A SEX     F  2 ( 40.0%)
2 ARM A SEX     M  3 ( 60.0%)
3 ARM B SEX     F  2 ( 50.0%)
4 ARM B SEX     M  2 ( 50.0%)
5 ARM C SEX     F  2 ( 50.0%)
6 ARM C SEX     M  2 ( 50.0%)
7 ARM D SEX     F  2 ( 66.7%)
8 ARM D SEX     M  1 ( 33.3%)

Transpose ARMs into columns

proc_transpose: input data set 8 rows and 4 columns
                by: LABEL
                var: CNTPCT
                id: BY
                copy: VAR
                name: NAME
                output dataset 2 rows and 7 columns

  VAR LABEL   NAME       ARM A       ARM B       ARM C       ARM D
1 SEX     F CNTPCT  2 ( 40.0%)  2 ( 50.0%)  2 ( 50.0%)  2 ( 66.7%)
2 SEX     M CNTPCT  3 ( 60.0%)  2 ( 50.0%)  2 ( 50.0%)  1 ( 33.3%)

Clean up

datastep: columns decreased from 7 to 6

  VAR  LABEL       ARM A       ARM B       ARM C       ARM D
1 SEX Female  2 ( 40.0%)  2 ( 50.0%)  2 ( 50.0%)  2 ( 66.7%)
2 SEX   Male  3 ( 60.0%)  2 ( 50.0%)  2 ( 50.0%)  1 ( 33.3%)

Sort by label

proc_sort: input data set 2 rows and 6 columns
           by: LABEL
           keep: VAR LABEL ARM A ARM B ARM C ARM D
           order: a
           nodupkey: FALSE
           output data set 2 rows and 6 columns

  VAR  LABEL       ARM A       ARM B       ARM C       ARM D
2 SEX   Male  3 ( 60.0%)  2 ( 50.0%)  2 ( 50.0%)  1 ( 33.3%)
1 SEX Female  2 ( 40.0%)  2 ( 50.0%)  2 ( 50.0%)  2 ( 66.7%)

Get sex chisq

proc_freq: input data set 16 rows and 6 columns
           tables: SEX * ARM
           view: TRUE
           output: 1 datasets

      CHISQ CHISQ.DF   CHISQ.P
1 0.5333333        3 0.9115095

Combine chisq statistics

datastep: columns decreased from 3 to 1

         PVALUE
1 0.533 (0.912)

Append chisq

datastep: columns increased from 6 to 7

  VAR  LABEL       ARM A       ARM B       ARM C       ARM D        PVALUE
1 SEX   Male  3 ( 60.0%)  2 ( 50.0%)  2 ( 50.0%)  1 ( 33.3%) 0.533 (0.912)
2 SEX Female  2 ( 40.0%)  2 ( 50.0%)  2 ( 50.0%)  2 ( 66.7%)          &lt;NA&gt;

=========================================================================
Create frequency counts for RACE
=========================================================================

Get race frequency counts

proc_freq: input data set 16 rows and 6 columns
           tables: RACE
           by: ARM
           view: TRUE
           output: 1 datasets

     BY  VAR   CAT CNT       PCT
1 ARM A RACE BLACK   1  20.00000
2 ARM A RACE WHITE   4  80.00000
3 ARM B RACE BLACK   0   0.00000
4 ARM B RACE WHITE   4 100.00000
5 ARM C RACE BLACK   1  25.00000
6 ARM C RACE WHITE   3  75.00000
7 ARM D RACE BLACK   1  33.33333
8 ARM D RACE WHITE   2  66.66667

Combine counts and percents.

datastep: columns decreased from 5 to 4

     BY  VAR LABEL      CNTPCT
1 ARM A RACE BLACK  1 ( 20.0%)
2 ARM A RACE WHITE  4 ( 80.0%)
3 ARM B RACE BLACK  0 (  0.0%)
4 ARM B RACE WHITE  4 (100.0%)
5 ARM C RACE BLACK  1 ( 25.0%)
6 ARM C RACE WHITE  3 ( 75.0%)
7 ARM D RACE BLACK  1 ( 33.3%)
8 ARM D RACE WHITE  2 ( 66.7%)

Transpose ARMs into columns

proc_transpose: input data set 8 rows and 4 columns
                by: LABEL
                var: CNTPCT
                id: BY
                copy: VAR
                name: NAME
                output dataset 2 rows and 7 columns

   VAR LABEL   NAME       ARM A       ARM B       ARM C       ARM D
1 RACE BLACK CNTPCT  1 ( 20.0%)  0 (  0.0%)  1 ( 25.0%)  1 ( 33.3%)
2 RACE WHITE CNTPCT  4 ( 80.0%)  4 (100.0%)  3 ( 75.0%)  2 ( 66.7%)

Clean up

datastep: columns decreased from 7 to 6

   VAR                     LABEL       ARM A       ARM B       ARM C       ARM D
1 RACE Black or African American  1 ( 20.0%)  0 (  0.0%)  1 ( 25.0%)  1 ( 33.3%)
2 RACE                     White  4 ( 80.0%)  4 (100.0%)  3 ( 75.0%)  2 ( 66.7%)

Sort by label

proc_sort: input data set 2 rows and 6 columns
           by: LABEL
           keep: VAR LABEL ARM A ARM B ARM C ARM D
           order: a
           nodupkey: FALSE
           output data set 2 rows and 6 columns

   VAR                     LABEL       ARM A       ARM B       ARM C       ARM D
2 RACE                     White  4 ( 80.0%)  4 (100.0%)  3 ( 75.0%)  2 ( 66.7%)
1 RACE Black or African American  1 ( 20.0%)  0 (  0.0%)  1 ( 25.0%)  1 ( 33.3%)

Get race chisq

proc_freq: input data set 16 rows and 6 columns
           tables: RACE * ARM
           view: TRUE
           output: 1 datasets

     CHISQ CHISQ.DF   CHISQ.P
1 1.449573        3 0.6939569

Combine chisq statistics

datastep: columns decreased from 3 to 1

         PVALUE
1 1.450 (0.694)

Append chisq

datastep: columns increased from 6 to 7

   VAR                     LABEL       ARM A       ARM B       ARM C       ARM D
1 RACE                     White  4 ( 80.0%)  4 (100.0%)  3 ( 75.0%)  2 ( 66.7%)
2 RACE Black or African American  1 ( 20.0%)  0 (  0.0%)  1 ( 25.0%)  1 ( 33.3%)
         PVALUE
1 1.450 (0.694)
2          &lt;NA&gt;

=========================================================================
Create frequency counts for Age Group
=========================================================================

Get age group frequency counts

proc_freq: input data set 16 rows and 6 columns
           tables: AGECAT
           by: ARM
           view: TRUE
           output: 1 datasets

      BY    VAR      CAT CNT      PCT
1  ARM A AGECAT 18 to 29   1 20.00000
2  ARM A AGECAT 30 to 39   3 60.00000
3  ARM A AGECAT 40 to 49   1 20.00000
4  ARM B AGECAT 18 to 29   1 25.00000
5  ARM B AGECAT 30 to 39   3 75.00000
6  ARM B AGECAT 40 to 49   0  0.00000
7  ARM C AGECAT 18 to 29   1 25.00000
8  ARM C AGECAT 30 to 39   3 75.00000
9  ARM C AGECAT 40 to 49   0  0.00000
10 ARM D AGECAT 18 to 29   1 33.33333
11 ARM D AGECAT 30 to 39   2 66.66667
12 ARM D AGECAT 40 to 49   0  0.00000

Combine counts and percents and assign age group factor for sorting

datastep: columns decreased from 5 to 4

      VAR    LABEL    BY      CNTPCT
1  AGECAT 18 to 29 ARM A  1 ( 20.0%)
2  AGECAT 30 to 39 ARM A  3 ( 60.0%)
3  AGECAT 40 to 49 ARM A  1 ( 20.0%)
4  AGECAT 18 to 29 ARM B  1 ( 25.0%)
5  AGECAT 30 to 39 ARM B  3 ( 75.0%)
6  AGECAT 40 to 49 ARM B  0 (  0.0%)
7  AGECAT 18 to 29 ARM C  1 ( 25.0%)
8  AGECAT 30 to 39 ARM C  3 ( 75.0%)
9  AGECAT 40 to 49 ARM C  0 (  0.0%)
10 AGECAT 18 to 29 ARM D  1 ( 33.3%)
11 AGECAT 30 to 39 ARM D  2 ( 66.7%)
12 AGECAT 40 to 49 ARM D  0 (  0.0%)

Sort by age group factor

proc_sort: input data set 12 rows and 4 columns
           by: BY LABEL
           keep: VAR LABEL BY CNTPCT
           order: a a
           nodupkey: FALSE
           output data set 12 rows and 4 columns

      VAR    LABEL    BY      CNTPCT
1  AGECAT 18 to 29 ARM A  1 ( 20.0%)
2  AGECAT 30 to 39 ARM A  3 ( 60.0%)
3  AGECAT 40 to 49 ARM A  1 ( 20.0%)
4  AGECAT 18 to 29 ARM B  1 ( 25.0%)
5  AGECAT 30 to 39 ARM B  3 ( 75.0%)
6  AGECAT 40 to 49 ARM B  0 (  0.0%)
7  AGECAT 18 to 29 ARM C  1 ( 25.0%)
8  AGECAT 30 to 39 ARM C  3 ( 75.0%)
9  AGECAT 40 to 49 ARM C  0 (  0.0%)
10 AGECAT 18 to 29 ARM D  1 ( 33.3%)
11 AGECAT 30 to 39 ARM D  2 ( 66.7%)
12 AGECAT 40 to 49 ARM D  0 (  0.0%)

Tranpose age group block

proc_transpose: input data set 12 rows and 4 columns
                by: LABEL
                var: CNTPCT
                id: BY
                copy: VAR
                name: NAME
                output dataset 3 rows and 7 columns

     VAR    LABEL   NAME       ARM A       ARM B       ARM C       ARM D
1 AGECAT 18 to 29 CNTPCT  1 ( 20.0%)  1 ( 25.0%)  1 ( 25.0%)  1 ( 33.3%)
2 AGECAT 30 to 39 CNTPCT  3 ( 60.0%)  3 ( 75.0%)  3 ( 75.0%)  2 ( 66.7%)
3 AGECAT 40 to 49 CNTPCT  1 ( 20.0%)  0 (  0.0%)  0 (  0.0%)  0 (  0.0%)

Some clean up

datastep: columns decreased from 7 to 6

     VAR    LABEL       ARM A       ARM B       ARM C       ARM D
1 AGECAT 18 to 29  1 ( 20.0%)  1 ( 25.0%)  1 ( 25.0%)  1 ( 33.3%)
2 AGECAT 30 to 39  3 ( 60.0%)  3 ( 75.0%)  3 ( 75.0%)  2 ( 66.7%)
3 AGECAT 40 to 49  1 ( 20.0%)  0 (  0.0%)  0 (  0.0%)  0 (  0.0%)

Get ageg chisq

proc_freq: input data set 16 rows and 6 columns
           tables: AGECAT * ARM
           view: TRUE
           output: 1 datasets

     CHISQ CHISQ.DF   CHISQ.P
1 2.436364        6 0.8755205

Combine chisq statistics

datastep: columns decreased from 3 to 1

         PVALUE
1 2.436 (0.876)

Append chisq

datastep: columns increased from 6 to 7

     VAR    LABEL       ARM A       ARM B       ARM C       ARM D        PVALUE
1 AGECAT 18 to 29  1 ( 20.0%)  1 ( 25.0%)  1 ( 25.0%)  1 ( 33.3%) 2.436 (0.876)
2 AGECAT 30 to 39  3 ( 60.0%)  3 ( 75.0%)  3 ( 75.0%)  2 ( 66.7%)          &lt;NA&gt;
3 AGECAT 40 to 49  1 ( 20.0%)  0 (  0.0%)  0 (  0.0%)  0 (  0.0%)          &lt;NA&gt;

Combine blocks into final data frame

datastep: columns started with 7 and ended with 7

      VAR                     LABEL       ARM A       ARM B       ARM C       ARM D
1     AGE                         N           5           4           4           3
2     AGE                 Mean (SD) 34.4 (8.71) 30.0 (6.16) 32.0 (6.16) 32.0 (5.29)
3     AGE                    Median        37.0        32.5        34.5        30.0
4     AGE                   Q1 - Q3 37.0 - 39.0 26.0 - 34.0 28.0 - 36.0 28.0 - 38.0
5     AGE                 Min - Max     19 - 40     21 - 34     23 - 36     28 - 38
6  AGECAT                  18 to 29  1 ( 20.0%)  1 ( 25.0%)  1 ( 25.0%)  1 ( 33.3%)
7  AGECAT                  30 to 39  3 ( 60.0%)  3 ( 75.0%)  3 ( 75.0%)  2 ( 66.7%)
8  AGECAT                  40 to 49  1 ( 20.0%)  0 (  0.0%)  0 (  0.0%)  0 (  0.0%)
9     SEX                      Male  3 ( 60.0%)  2 ( 50.0%)  2 ( 50.0%)  1 ( 33.3%)
10    SEX                    Female  2 ( 40.0%)  2 ( 50.0%)  2 ( 50.0%)  2 ( 66.7%)
11   RACE                     White  4 ( 80.0%)  4 (100.0%)  3 ( 75.0%)  2 ( 66.7%)
12   RACE Black or African American  1 ( 20.0%)  0 (  0.0%)  1 ( 25.0%)  1 ( 33.3%)
          PVALUE
1  0.298 (0.826)
2           &lt;NA&gt;
3           &lt;NA&gt;
4           &lt;NA&gt;
5           &lt;NA&gt;
6  2.436 (0.876)
7           &lt;NA&gt;
8           &lt;NA&gt;
9  0.533 (0.912)
10          &lt;NA&gt;
11 1.450 (0.694)
12          &lt;NA&gt;

=========================================================================
Create and print report
=========================================================================

Write out the report

# A report specification: 1 pages
- file_path: 'C:\Users\dbosa\AppData\Local\Temp\RtmpKQddL7/ProcsDemoDM.rtf'
- output_type: RTF
- units: inches
- orientation: landscape
- margins: top 1 bottom 1 left 1 right 1
- line size/count: 9/36
- page_header: left=Sponsor: Company right=Study: ABC
- page_footer: left=Date Produced: 2022-10-15 center= right=Page [pg] of [tpg]
- content: 
# A table specification:
- data: data.frame 'final' 12 rows 7 cols
- show_cols: all
- use_attributes: all
- title 1: 'Table 1.0'
- title 2: 'Analysis of Demographic Characteristics'
- title 3: 'Safety Population'
- footnote 1: 'Program: DM_Table.R'
- footnote 2: 'NOTE: Denominator based on number of non-missing responses.'
- footnote 3: 'Â¹Pearson's Chi-Square tests will be used for Categorical variables and ANOVA tests for continuous variables.'
- stub: VAR LABEL 'Variable' width=2.5 align='left' 
- define: VAR 'Variable' dedupe='TRUE' 
- define: LABEL 'Demographic Category' 
- define: ARM A 'Placebo' 
- define: ARM B 'Drug 50mg' 
- define: ARM C 'Drug 100mg' 
- define: ARM D 'Competitor' 
- define: PVALUE 'Tests of AssociationÂ¹
 Value (P-Value)' width=2 align='center' dedupe='TRUE' 

=========================================================================
Clean Up
=========================================================================

Unload libname

lib_sync: synchronized data in library 'sdtm'

lib_unload: library 'sdtm' unloaded

Close log

=========================================================================
Log End Time: 2022-10-15 20:01:03
Log Elapsed Time: 0 00:00:00
=========================================================================

</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by David Bosak.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
