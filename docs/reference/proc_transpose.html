<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Transposes a Dataset — proc_transpose • procs</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><script src="../extra.js"></script><meta property="og:title" content="Transposes a Dataset — proc_transpose"><meta property="og:description" content="A function to pivot or transpose a data frame. In the default
usage, the variables identified by the parameter var are transposed
to become rows. The variable values in the parameter id become
the new columns. The function has several more parameters to control
how variables are named in the transposed data set. Parameters will
accept quoted or unquoted values."><meta property="og:image" content="https://procs.r-sassy.org/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">procs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"></ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="../articles/procs.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/procs-freq.html">The Frequency Function</a>
    </li>
    <li>
      <a href="../articles/procs-means.html">The Means Function</a>
    </li>
    <li>
      <a href="../articles/procs-ttest.html">The TTest Function</a>
    </li>
    <li>
      <a href="../articles/procs-reg.html">The Reg Function</a>
    </li>
    <li>
      <a href="../articles/procs-dm.html">Data Manipulation Functions</a>
    </li>
    <li>
      <a href="../articles/procs-example1.html">Example 1: Demographics</a>
    </li>
    <li>
      <a href="../articles/procs-example2.html">Example 2: Adverse Events</a>
    </li>
    <li>
      <a href="../articles/procs-example3.html">Example 3: Disposition</a>
    </li>
    <li>
      <a href="../articles/procs-faq.html">Frequently Asked Questions</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href=".././articles/procs-faq.html">FAQ</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/dbosak01/procs/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Transposes a Dataset</h1>
    <small class="dont-index">Source: <a href="https://github.com/dbosak01/procs/blob/HEAD/R/proc_transpose.R" class="external-link"><code>R/proc_transpose.R</code></a></small>
    <div class="hidden name"><code>proc_transpose.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A function to pivot or transpose a data frame. In the default
usage, the variables identified by the parameter <code>var</code> are transposed
to become rows. The variable values in the parameter <code>id</code> become
the new columns. The function has several more parameters to control
how variables are named in the transposed data set. Parameters will
accept quoted or unquoted values.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">proc_transpose</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  idlabel <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  copy <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"NAME"</span>,</span>
<span>  namelabel <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prefix <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  delimiter <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  suffix <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  where <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  options <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  log <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>The input data to transpose.</p></dd>


<dt>by</dt>
<dd><p>An optional by group.  Parameter accepts a vector of one or more
quoted variable names. If the by group is requested, the data will be subset
by that variable and the transpose function will
transpose each group and stack them together in a single table.</p></dd>


<dt>var</dt>
<dd><p>The variable or variables to transpose.  Parameter accepts a vector
of variable names.  By default, all numeric variables will be transposed.</p></dd>


<dt>id</dt>
<dd><p>The variable or variables to use for the transposed column names.</p></dd>


<dt>idlabel</dt>
<dd><p>The variable to use for the transposed column labels.</p></dd>


<dt>copy</dt>
<dd><p>A vector of variables to retain in the output data
without transposition.  Values will be truncated or recycled to fit
the number of output rows.</p></dd>


<dt>name</dt>
<dd><p>Specifies the name of the variable to be used for the
var values.</p></dd>


<dt>namelabel</dt>
<dd><p>The label to use for the name variable.</p></dd>


<dt>prefix</dt>
<dd><p>Contains a prefix to be used in the construction of
column names.</p></dd>


<dt>delimiter</dt>
<dd><p>Specifies a delimiter to be used in the construction
of column names.</p></dd>


<dt>suffix</dt>
<dd><p>Contains a suffix to be used in the construction of
column names.</p></dd>


<dt>where</dt>
<dd><p>An expression to filter the rows after the transform
is complete.  Use the <code><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></code> function to define
the where clause.</p></dd>


<dt>options</dt>
<dd><p>Optional keywords that affect the transpose. Default is NULL.
Available option is "noname" which drops the name column from the
output dataset.</p></dd>


<dt>log</dt>
<dd><p>Whether or not to log the procedure.  Default is TRUE.
This parameter is used internally.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The transposed dataset. If a data frame
is input, a data frame will be output.  If a tibble is input, a tibble
will be output.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The <code>proc_tranpose</code> function takes an input data frame or tibble
and transposes the columns and rows.  If no parameters are specified,
the function will assign all numeric variables to the <code>var</code> parameter.
These variables will become rows, and generic column names
("COL1", "COL2", etc.) will be generated.
Other variables will be dropped.</p>
<p>There are several parameters to control how new column names are constructed.
If the desired column names already exist in your data, identify them on the
<code>id</code> parameter.  The function will then use those data values
unaltered.  The label for these new columns can also be constructed from
data values using the <code>idlabel</code> parameter.</p>
<p>The <code>name</code> and <code>namelabel</code> parameter are used to control the
name of the column created for the <code>var</code> values.  If this parameter
is not passed, the column will be called "NAME", and no label will be assigned.</p>
<p>You may group the transposed values using the <code>by</code> parameter. This
parameter accepts one or more variable names to use for grouping.  If this
parameter is used, the function will first subset the data by the unique
combination of <code>by</code> variables, transpose each subset, and then
combine the result into a single output dataset.  The by group variables
will be named on the output dataset with a generic name ("BY1", "BY2", etc.).</p>
<p>The <code>copy</code> parameter is used to simply copy columns from the input
dataset to the transposed dataset.  If necessary, these values will be
recycled or truncated to fit the number of output rows.  Any input
variables not included in the <code>var</code>, <code>id</code>, or <code>copy</code> parameter
will be dropped.</p>
<p>Once the transpose is complete, you may wish to filter the output data.
Filtering can be accomplished using the <code>where</code> parameter.  This parameter
takes an expression using the <code>expression</code> function.  The expression
is constructed using standard R logical operators.  Variable names do
not need to be quoted.</p>
<p>The <code>prefix</code>, <code>delimiter</code>, and <code>suffix</code> parameter are used
to control how generic column names are constructed.  These parameters
are especially useful when there are multiple <code>var</code> variables.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># Prepare data</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>CAT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">USPersonalExpenditure</span><span class="op">)</span>,</span>
<span>                  <span class="va">USPersonalExpenditure</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                  row.names <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># View data</span></span>
<span><span class="va">dat</span></span>
<span><span class="co">#                   CAT X1940 X1945 X1950 X1955 X1960</span></span>
<span><span class="co"># 1    Food and Tobacco 22.20 44.50 59.60  73.2  86.8</span></span>
<span><span class="co"># 2 Household Operation 10.50 15.50 29.00  36.5  46.2</span></span>
<span><span class="co"># 3  Medical and Health  3.53  5.76  9.71  14.0  21.1</span></span>
<span><span class="co"># 4       Personal Care  1.04  1.98  2.45   3.4   5.4</span></span>
<span></span>
<span><span class="co"># Default transpose</span></span>
<span><span class="va">tdat1</span> <span class="op">&lt;-</span> <span class="fu">proc_transpose</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View results</span></span>
<span><span class="va">tdat1</span></span>
<span><span class="co">#    NAME COL1 COL2  COL3 COL4</span></span>
<span><span class="co"># 1 X1940 22.2 10.5  3.53 1.04</span></span>
<span><span class="co"># 2 X1945 44.5 15.5  5.76 1.98</span></span>
<span><span class="co"># 3 X1950 59.6 29.0  9.71 2.45</span></span>
<span><span class="co"># 4 X1955 73.2 36.5 14.00 3.40</span></span>
<span><span class="co"># 5 X1960 86.8 46.2 21.10 5.40</span></span>
<span></span>
<span><span class="co"># Transpose with ID and Name</span></span>
<span><span class="va">tdat2</span> <span class="op">&lt;-</span>  <span class="fu">proc_transpose</span><span class="op">(</span><span class="va">dat</span>, id <span class="op">=</span> <span class="va">CAT</span>, name <span class="op">=</span> <span class="va">Year</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View results</span></span>
<span><span class="va">tdat2</span></span>
<span><span class="co">#   Year Food and Tobacco Household Operation Medical and Health Personal Care</span></span>
<span><span class="co"># 1 X1940             22.2                10.5               3.53          1.04</span></span>
<span><span class="co"># 2 X1945             44.5                15.5               5.76          1.98</span></span>
<span><span class="co"># 3 X1950             59.6                29.0               9.71          2.45</span></span>
<span><span class="co"># 4 X1955             73.2                36.5              14.00          3.40</span></span>
<span><span class="co"># 5 X1960             86.8                46.2              21.10          5.40</span></span>
<span></span>
<span><span class="co"># Transpose only some of the variables</span></span>
<span><span class="va">tdat3</span> <span class="op">&lt;-</span> <span class="fu">proc_transpose</span><span class="op">(</span><span class="va">dat</span>, var <span class="op">=</span> <span class="fu"><a href="https://common.r-sassy.org/reference/v.html" class="external-link">v</a></span><span class="op">(</span><span class="va">X1940</span>, <span class="va">X1950</span>, <span class="va">X1960</span><span class="op">)</span>, id <span class="op">=</span> <span class="va">CAT</span>, name <span class="op">=</span> <span class="va">Year</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View results</span></span>
<span><span class="va">tdat3</span></span>
<span><span class="co">#    Year Food and Tobacco Household Operation Medical and Health Personal Care</span></span>
<span><span class="co"># 1 X1940             22.2                10.5               3.53          1.04</span></span>
<span><span class="co"># 2 X1950             59.6                29.0               9.71          2.45</span></span>
<span><span class="co"># 3 X1960             86.8                46.2              21.10          5.40</span></span>
<span></span>
<span><span class="co"># By with a where clause</span></span>
<span><span class="va">tdat4</span> <span class="op">&lt;-</span> <span class="fu">proc_transpose</span><span class="op">(</span><span class="va">dat</span>, by <span class="op">=</span> <span class="va">CAT</span>, name <span class="op">=</span> <span class="va">Year</span>,</span>
<span>                        where <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">Year</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X1940"</span>, <span class="st">"X1950"</span>, <span class="st">"X1960"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View Results</span></span>
<span><span class="va">tdat4</span></span>
<span><span class="co">#                    CAT  Year  COL1</span></span>
<span><span class="co"># 1     Food and Tobacco X1940 22.20</span></span>
<span><span class="co"># 2     Food and Tobacco X1950 59.60</span></span>
<span><span class="co"># 3     Food and Tobacco X1960 86.80</span></span>
<span><span class="co"># 4  Household Operation X1940 10.50</span></span>
<span><span class="co"># 5  Household Operation X1950 29.00</span></span>
<span><span class="co"># 6  Household Operation X1960 46.20</span></span>
<span><span class="co"># 7   Medical and Health X1940  3.53</span></span>
<span><span class="co"># 8   Medical and Health X1950  9.71</span></span>
<span><span class="co"># 9   Medical and Health X1960 21.10</span></span>
<span><span class="co"># 10       Personal Care X1940  1.04</span></span>
<span><span class="co"># 11       Personal Care X1950  2.45</span></span>
<span><span class="co"># 12       Personal Care X1960  5.40</span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by David Bosak.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

