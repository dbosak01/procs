=========================================================================
Log Path: ./log/Table1_0.log
Program Path: C:/packages/procs/tests/testthat/data/demo_table_1_0.R
Working Directory: C:/packages/procs
User Name: dbosa
R Version: 4.2.1 (2022-06-23 ucrt)
Machine: SOCRATES x86-64
Operating System: Windows 10 x64 build 19044
Base Packages: stats graphics grDevices utils datasets methods base Other
Packages: tidylog_1.0.2 broom_1.0.0 fmtr_1.5.8 common_1.0.2 reporter_1.3.5
logr_1.3.2 forcats_0.5.1 stringr_1.4.0 dplyr_1.0.9 purrr_0.3.4 readr_2.1.2
tidyr_1.2.0 tibble_3.1.7 ggplot2_3.3.6 tidyverse_1.3.1 procs_0.0.9005
testthat_3.1.4
Log Start Time: 2022-08-11 13:16:00
=========================================================================

=========================================================================
Read in ADSL data
=========================================================================

Data Filepath

C:/packages/procs/./tests/testthat/data

Create sample ADSL data.

Get ARM population counts

count: now 4 rows and 2 columns, ungrouped

ARM A ARM B ARM C ARM D 
    5     4     4     3 

Get ADaM format catalog

Perform anova test on age and arm.

filter: removed one row (50%), one row remaining

transmute: dropped 6 variables (term, df, sumsq, meansq, statistic, …)

           new variable 'stat' (character) with one unique value and 0% NA

# A tibble: 1 × 1
  stat         
  <chr>        
1 0.298 (0.826)

Perform chi squared test for each categorical variable.

transmute: dropped 4 variables (statistic, p.value, parameter, method)

           new variable 'stat' (character) with one unique value and 0% NA

# A tibble: 1 × 1
  stat         
  <chr>        
1 2.436 (0.876)

transmute: dropped 4 variables (statistic, p.value, parameter, method)

           new variable 'stat' (character) with one unique value and 0% NA

# A tibble: 1 × 1
  stat         
  <chr>        
1 0.533 (0.912)

transmute: dropped 4 variables (statistic, p.value, parameter, method)

           new variable 'stat' (character) with one unique value and 0% NA

# A tibble: 1 × 1
  stat         
  <chr>        
1 1.450 (0.694)

=========================================================================
Create summary statistics for age
=========================================================================

group_by: one grouping variable (ARM)

summarise: now 4 rows and 6 columns, ungrouped

pivot_longer: reorganized (N, Mean (SD), Median, Q1 - Q3, Range) into (label, value) [was 4x6, now 20x3]

pivot_wider: reorganized (ARM, value) into (ARM A, ARM B, ARM C, ARM D) [was 20x3, now 5x5]

# A tibble: 5 × 7
  var   label     `ARM A`     `ARM B`     `ARM C`     `ARM D`     stat         
  <chr> <chr>     <chr>       <chr>       <chr>       <chr>       <chr>        
1 AGE   N         5           4           4           3           0.298 (0.826)
2 AGE   Mean (SD) 34.4 (8.7)  30.0 (6.2)  32.0 (6.2)  32.0 (5.3)  0.298 (0.826)
3 AGE   Median    37.0        32.5        34.5        30.0        0.298 (0.826)
4 AGE   Q1 - Q3   37.0 - 39.0 28.5 - 34.0 30.5 - 36.0 29.0 - 34.0 0.298 (0.826)
5 AGE   Range     19 - 40     21 - 34     23 - 36     28 - 38     0.298 (0.826)

=========================================================================
Create frequency counts for Age Group
=========================================================================

Create age group frequency counts

select: dropped 4 variables (SUBJID, SEX, RACE, AGE)

group_by: 2 grouping variables (ARM, AGEGR1)

summarize: now 9 rows and 3 columns, one group variable remaining (ARM)

pivot_wider: reorganized (ARM, n) into (ARM A, ARM B, ARM C, ARM D) [was 9x3, now 3x5]

transmute: dropped one variable (AGEGR1)

           new variable 'var' (character) with one unique value and 0% NA

           new variable 'label' (factor) with 3 unique values and 0% NA

           converted 'ARM A' from integer to character (0 new NA)

           converted 'ARM B' from integer to character (0 new NA)

           converted 'ARM C' from integer to character (0 new NA)

           converted 'ARM D' from integer to character (0 new NA)

# A tibble: 3 × 7
  var    label       `ARM A`    `ARM B`    `ARM C`    `ARM D`    stat         
  <chr>  <fct>       <chr>      <chr>      <chr>      <chr>      <chr>        
1 AGEGR1 18-29 years 1 ( 20.0%) 1 ( 25.0%) 1 ( 25.0%) 1 ( 33.3%) 2.436 (0.876)
2 AGEGR1 30-39 years 3 ( 60.0%) 3 ( 75.0%) 3 ( 75.0%) 2 ( 66.7%) 2.436 (0.876)
3 AGEGR1 40-49 years 1 ( 20.0%) 0 (  0.0%) 0 (  0.0%) 0 (  0.0%) 2.436 (0.876)

=========================================================================
Create frequency counts for SEX
=========================================================================

select: dropped 4 variables (SUBJID, RACE, AGE, AGEGR1)

group_by: 2 grouping variables (ARM, SEX)

summarize: now 8 rows and 3 columns, one group variable remaining (ARM)

pivot_wider: reorganized (ARM, n) into (ARM A, ARM B, ARM C, ARM D) [was 8x3, now 2x5]

transmute: dropped one variable (SEX)

           new variable 'var' (character) with one unique value and 0% NA

           new variable 'label' (factor) with 2 unique values and 0% NA

           converted 'ARM A' from integer to character (0 new NA)

           converted 'ARM B' from integer to character (0 new NA)

           converted 'ARM C' from integer to character (0 new NA)

           converted 'ARM D' from integer to character (0 new NA)

mutate: converted 'label' from factor to character (0 new NA)

# A tibble: 2 × 7
  var   label  `ARM A`    `ARM B`    `ARM C`    `ARM D`    stat         
  <chr> <chr>  <chr>      <chr>      <chr>      <chr>      <chr>        
1 SEX   Male   3 ( 60.0%) 2 ( 50.0%) 2 ( 50.0%) 1 ( 33.3%) 0.533 (0.912)
2 SEX   Female 2 ( 40.0%) 2 ( 50.0%) 2 ( 50.0%) 2 ( 66.7%) 0.533 (0.912)

=========================================================================
Create frequency counts for RACE
=========================================================================

select: dropped 4 variables (SUBJID, SEX, AGE, AGEGR1)

mutate: converted 'RACE' from character to factor (0 new NA)

group_by: 2 grouping variables (ARM, RACE)

summarize: now 7 rows and 3 columns, one group variable remaining (ARM)

pivot_wider: reorganized (ARM, n) into (ARM A, ARM B, ARM C, ARM D) [was 7x3, now 2x5]

transmute: dropped one variable (RACE)

           new variable 'var' (character) with one unique value and 0% NA

           new variable 'label' (factor) with 2 unique values and 0% NA

           converted 'ARM A' from integer to character (0 new NA)

           converted 'ARM B' from integer to character (0 new NA)

           converted 'ARM C' from integer to character (0 new NA)

           converted 'ARM D' from integer to character (0 new NA)

# A tibble: 2 × 7
  var   label                     `ARM A`    `ARM B`    `ARM C`    `ARM D`    stat         
  <chr> <fct>                     <chr>      <chr>      <chr>      <chr>      <chr>        
1 RACE  White                     4 ( 80.0%) 4 (100.0%) 3 ( 75.0%) 2 ( 66.7%) 1.450 (0.694)
2 RACE  Black or African American 1 ( 20.0%) 0 (  0.0%) 1 ( 25.0%) 1 ( 33.3%) 1.450 (0.694)

=========================================================================
Create final data frame
=========================================================================

# A tibble: 12 × 7
   var    label                     `ARM A`     `ARM B`     `ARM C`     `ARM D`     stat         
   <chr>  <chr>                     <chr>       <chr>       <chr>       <chr>       <chr>        
 1 AGE    N                         5           4           4           3           0.298 (0.826)
 2 AGE    Mean (SD)                 34.4 (8.7)  30.0 (6.2)  32.0 (6.2)  32.0 (5.3)  0.298 (0.826)
 3 AGE    Median                    37.0        32.5        34.5        30.0        0.298 (0.826)
 4 AGE    Q1 - Q3                   37.0 - 39.0 28.5 - 34.0 30.5 - 36.0 29.0 - 34.0 0.298 (0.826)
 5 AGE    Range                     19 - 40     21 - 34     23 - 36     28 - 38     0.298 (0.826)
 6 AGEGR1 18-29 years               1 ( 20.0%)  1 ( 25.0%)  1 ( 25.0%)  1 ( 33.3%)  2.436 (0.876)
 7 AGEGR1 30-39 years               3 ( 60.0%)  3 ( 75.0%)  3 ( 75.0%)  2 ( 66.7%)  2.436 (0.876)
 8 AGEGR1 40-49 years               1 ( 20.0%)  0 (  0.0%)  0 (  0.0%)  0 (  0.0%)  2.436 (0.876)
 9 SEX    Male                      3 ( 60.0%)  2 ( 50.0%)  2 ( 50.0%)  1 ( 33.3%)  0.533 (0.912)
10 SEX    Female                    2 ( 40.0%)  2 ( 50.0%)  2 ( 50.0%)  2 ( 66.7%)  0.533 (0.912)
11 RACE   White                     4 ( 80.0%)  4 (100.0%)  3 ( 75.0%)  2 ( 66.7%)  1.450 (0.694)
12 RACE   Black or African American 1 ( 20.0%)  0 (  0.0%)  1 ( 25.0%)  1 ( 33.3%)  1.450 (0.694)

=========================================================================
Create and print report (Separate Labels)
=========================================================================

# A report specification: 1 pages
- file_path: 'output/DM_Table.rtf'
- output_type: RTF
- units: inches
- orientation: landscape
- margins: top 1 bottom 1 left 1 right 1
- line size/count: 107/41
- page_header: left=Sponsor: Experis right=Study: ABC
- page_footer: left=Date Produced: 11Aug22 13:16 center= right=Page [pg] of [tpg]
- content: 
# A table specification:
- data: tibble 'final' 12 rows 7 cols
- show_cols: all
- use_attributes: all
- width: 9
- title 1: 'Table 1.0'
- title 2: 'Analysis of Demographic Characteristics'
- title 3: 'Safety Population'
- footnote 1: 'Program: Table1_0.R'
- footnote 2: 'NOTE: Denominator based on number of non-missing responses.'
- footnote 3: '*Pearsons's Chi-Square tests will be used for categorical variables'
- footnote 4: '   and ANOVA tests for continuous variables.'
- stub: var label 'Variable' width=2.5 align='left' 
- define: var 'Variable' dedupe='TRUE' 
- define: label 'Demographic Category' 
- define: ARM A 
- define: ARM B 
- define: ARM C 
- define: ARM D 
- define: stat 'Tests of Association*
Value (P-value)' width=2 align='center' dedupe='TRUE' 

=========================================================================
Log End Time: 2022-08-11 13:16:05
Log Elapsed Time: 0 00:00:04
=========================================================================
